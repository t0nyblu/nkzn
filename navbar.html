<script>

function myFunction(page, event, letter) {
	
	console.log("Entro in myFunction");
	   
	updateActiveNavItem(page);
    event.preventDefault(); // Impedisce al link di eseguire l'azione predefinita
    var urlParams = new URLSearchParams(window.location.search);
    urlParams.set('page', page); // Imposta il parametro di query della pagina

    if(urlParams.get('idquestion')){
    	
    	  urlParams.delete('idquestion');
    }
    
    // Aggiungi il parametro letter solo se è definito e la pagina è il glossario
    if (letter && page === 'glossario') {
        urlParams.set('letter', letter);
    } else {
        urlParams.delete('letter'); // Rimuovi il parametro letter se la pagina non è il glossario
    }
    urlParams.delete('word');
    var queryString = urlParams.toString();
    $("#PAGINADAVISUALIZZARE").load(page + ".html");
    history.pushState(null, null, '?' + queryString);   
} 


//Listener per gestire i cambiamenti dell'URL
window.onpopstate = function(event) {
    var urlParams = new URLSearchParams(window.location.search);
    var page = urlParams.get('page');
    if (page) {
        myFunction(page, event);
    }
};

// Esegui un controllo all'avvio per sincronizzare l'elemento attivo con l'URL corrente
window.onload = function() {
    initFunc(); // Chiamare initFunc() quando la pagina viene caricata
};

//Add active class to the current button (highlight it)
var header = document.getElementById("navList");
var btns = header.getElementsByClassName("page-item");
</script>

<div class="container">
	<nav class="navbar navbar-expand-md"
		aria-label="Page navigation example">
		<ul
			class="navbar-nav mr-auto w-100 pagination justify-content-center nav nav-pills nav-fill gap-2 p-1 small"
			id="navList" style="box-shadow: none;">
			<li class="page-item"><a style="box-shadow: none;" class="page-link navFont"
				onclick="myFunction('primipassi', event, null)" href="?page=primipassi">PRIMI
					PASSI</a></li>
			<li class="page-item"><a style="box-shadow: none;" class="page-link navFont"
				onclick="myFunction('glossario', event, null)" href="?page=glossario">GLOSSARIO</a></li>
			<li class="page-item"><a style="box-shadow: none;" class="page-link navFont"
				onclick="myFunction('domande', event, null)" href="?page=domande">DOMANDE
					FREQUENTI</a></li>
			<li class="page-item"><a style="box-shadow: none;"  class="page-link navFont text-secondary" data-toggle="modal"
				data-target="#exampleModal0" 
				href="?page=falsimiti">FALSI MITI</a></li>
							<li class="page-item"><a style="box-shadow: none;" class="page-link navFont text-secondary" data-toggle="modal"
				data-target="#exampleModal2" href="?page=approfondimenti">APPROFONDIMENTI</a></li>
				
<!-- 			<li class="page-item disabled"><a class="page-link navFont"
				href="?page=guide">GUIDE</a></li> -->

			<li class="page-item"><a style="box-shadow: none;" class="page-link navFont text-secondary" data-toggle="modal"
				data-target="#exampleModal" href="?page=guide"> GUIDE </a></li>
				
				
			<li class="page-item"><a style="box-shadow: none;" 
			
			class="page-link navFont text-secondary" data-toggle="modal"
				data-target="#exampleModal3"
			
		
				href="?page=guide"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
  <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
</svg></a></li>

		</ul>
	</nav>
</div>


<!-- Modal GUIDE -->
<div class="modal fade" id="exampleModal0" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Falsi miti:</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>In questa sezione ci sara'...</p>
      </div>
    </div>
  </div>
</div>



<!-- Modal GUIDE -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Guide:</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>In questa sezione ci sara'...</p>
      </div>
    </div>
  </div>
</div>



<!-- Modal APPROFONDIMENTI -->
<div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Approfondimenti:</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>In questa sezione ci sara'...</p>
      </div>
    </div>
  </div>
</div>



<!-- Modal IMPOSTAZIONI -->
<div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Impostazioni:</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>In questa sezione ci sara'...</p>
      </div>
    </div>
  </div>
</div>