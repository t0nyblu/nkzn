<script>

function myFunction(page, event, letter) {
	   
	updateActiveNavItem(page);
    event.preventDefault(); // Impedisce al link di eseguire l'azione predefinita
    var urlParams = new URLSearchParams(window.location.search);
    urlParams.set('page', page); // Imposta il parametro di query della pagina

    // Aggiungi il parametro letter solo se è definito e la pagina è il glossario
    if (letter && page === 'glossario') {
        urlParams.set('letter', letter);
    } else {
        urlParams.delete('letter'); // Rimuovi il parametro letter se la pagina non è il glossario
    }
    urlParams.delete('word');
    var queryString = urlParams.toString();
    $("#PAGINADAVISUALIZZARE").load(page + ".html");
    history.pushState(null, null, '?' + queryString);
    
    
} 

/* function myFunction(page, event, letter) {
    updateActiveNavItem(page); // Aggiorna l'elemento attivo della navbar
    event.preventDefault();
    var urlParams = new URLSearchParams(window.location.search);
    urlParams.set('page', page);

    if (letter && page === 'glossario') {
        urlParams.set('letter', letter);
    } else {
        urlParams.delete('letter');
    }
    urlParams.delete('word');
    var queryString = urlParams.toString();
    $("#PAGINADAVISUALIZZARE").load(page + ".html", function() {
        updateActiveNavItem(page); // Aggiorna l'elemento attivo della navbar dopo aver caricato la pagina
    });
    history.pushState(null, null, '?' + queryString);
} */


//Listener per gestire i cambiamenti dell'URL
window.onpopstate = function(event) {
    var urlParams = new URLSearchParams(window.location.search);
    var page = urlParams.get('page');
    if (page) {
        myFunction(page, event);
    }
};

// Esegui un controllo all'avvio per sincronizzare l'elemento attivo con l'URL corrente
window.onload = function() {
    initFunc(); // Chiamare initFunc() quando la pagina viene caricata
};

//Add active class to the current button (highlight it)
var header = document.getElementById("navList");
var btns = header.getElementsByClassName("page-item");
</script>

<div class="container">
	<nav class="navbar navbar-expand-md"
		aria-label="Page navigation example">
		<ul
			class="navbar-nav mr-auto w-100 pagination justify-content-center nav nav-pills nav-fill gap-2 p-1 small"
			id="navList">
			<li class="page-item"><a class="page-link navFont"
				onclick="myFunction('primipassi', event, null)" href="?page=primipassi">PRIMI
					PASSI</a></li>
			<li class="page-item"><a class="page-link navFont"
				onclick="myFunction('glossario', event, null)" href="?page=glossario">GLOSSARIO</a></li>
			<li class="page-item"><a class="page-link navFont"
				onclick="myFunction('domande', event, null)" href="?page=domande">DOMANDE
					FREQUENTI</a></li>
			<li class="page-item disabled"><a class="page-link navFont"
				href="?page=falsimiti">FALSI MITI</a></li>
			<li class="page-item disabled"><a class="page-link navFont"
				href="?page=guide">GUIDE</a></li>

		</ul>
	</nav>
</div>